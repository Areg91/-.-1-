                                              Домашнее задание к занятию «Репликация и масштабирование. Часть 1»
Инструкция по выполнению домашнего задания
Сделайте fork репозитория c шаблоном решения к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
Выполните клонирование этого репозитория к себе на ПК с помощью команды git clone.
Выполните домашнее задание и заполните у себя локально этот файл README.md:
впишите вверху название занятия и ваши фамилию и имя;
в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
для корректного добавления скриншотов воспользуйтесь инструкцией «Как вставить скриншот в шаблон с решением»;
при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в инструкции по MarkDown.
После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin).
Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.
Желаем успехов в выполнении домашнего задания.

Задание 1
На лекции рассматривались режимы репликации master-slave, master-master, опишите их различия.

Ответить в свободной форме.
Решение 1
### Режим репликации "хозяин-подчиненный":
В этом режиме один сервер выступает в роли главного («мастера», или хозяина), а остальные сервера являются подчинёнными («слейвами»). Главный сервер принимает изменения данных (например, вставки, обновления, удаления), а затем эти изменения передаются на подчинённые сервера. Подчинённые сервера могут выполнять только операции чтения данных, но не могут вносить изменения самостоятельно.

Преимущества режима "хозяин-подчиненый":
- Упрощённая архитектура: мастер-сервер управляет всеми изменениями, что упрощает управление системой.
- Высокая производительность операций записи: все операции записи происходят на одном мастере, что снижает нагрузку на сеть и уменьшает вероятность конфликтов.
- Простота масштабирования: легко добавить новые слейвы для увеличения пропускной способности чтения.

Недостатки режима "хозяин-подчинёный":
- Единственная точка отказа: если главный сервер выходит из строя, система теряет возможность принимать изменения данных.
- Ограниченная гибкость: подчинённые серверы не могут обрабатывать операции записи, что ограничивает функциональность системы.

### Режим репликации "хозяин-хозяин":
В этой модели несколько серверов действуют как равноправные хозяева. Каждый из них может принимать изменения от клиентов, и эти изменения синхронизируются между всеми серверами. Такой подход позволяет распределять нагрузку на запись между несколькими серверами.

Преимущества режима "хозяин-хозяин":
- Отказоустойчивость: нет единой точки отказа, так как каждый сервер может работать независимо.
- Гибкость: любой сервер может принимать запросы на изменение данных, что увеличивает общую доступность системы.
- Распределение нагрузки: нагрузка на запись распределяется равномерно между всеми хозяевами.

Недостатки режима "хозяин-хозяин":
- Сложность управления конфликтами: если два сервера одновременно вносят изменения в одни и те же данные, возникает необходимость разрешения конфликта.
- Более сложная реализация: требуется механизм синхронизации и координации между серверами, что усложняет архитектуру системы.
- Потенциальные проблемы с согласованностью данных: возможны задержки в обновлении данных на всех серверах, что может приводить к временному несоответствию данных.

### Заключение:
Выбор между этими двумя режимами зависит от требований конкретной системы. Режим "хозяин-подчинён" лучше подходит для случаев, где важна высокая производительность операций записи и простота управления, тогда как режим "хозяин-хозяин" предпочтителен там, где критична отказоустойчивость и распределение нагрузки на запись.

Задание 2
Выполните конфигурацию master-slave репликации, примером можно пользоваться из лекции.
Решение 2
1) sudo nano /etc/mysql/my.cnf
2)   server-id=1
   log_bin = /var/log/mysql/mysql-bin.log
   binlog_do_db = your_database_name
   relay-log = /var/lib/mysql/relay-bin
   auto_increment_offset = 1
   auto_increment_increment = 2
3)  service mysql restart
4)   CREATE USER 'replication_user'@'%' IDENTIFIED BY 'password';
   GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'%';
   FLUSH PRIVILEGES;
5)   SHOW MASTER STATUS;
   +------------------+----------+--------------+------------------+
   | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |
   +------------------+----------+--------------+------------------+
   | mysql-bin.000001 |      107 | your_db      |                  |
   +------------------+----------+--------------+------------------+
6)  sudo nano /etc/mysql/my.cnf
7)    server-id = 2
   replicate-do-db = your_database_name
   report-host = slave_hostname
   master-info-file = /var/db/master.info
   relay-log-info-file = /var/db/relay-log.info
   read-only
   skip-slave-start
8) service mysql restart
9)    CHANGE MASTER TO
     MASTER_HOST='master_ip_address',
     MASTER_USER='replication_user',
     MASTER_PASSWORD='password',
     MASTER_LOG_FILE='mysql-bin.000001', 
     MASTER_LOG_POS=107;                 
   START SLAVE;
10)   SHOW SLAVE STATUS\G
   *************************** 1. row ***************************
                 Slave_IO_State: Waiting for master to send event
                    Master_Host: master_ip_address
                    Master_User: replication_user
                    Master_Port: 3306
                  Connect_Retry: 60
                Master_Log_File: mysql-bin.000002
            Read_Master_Log_Pos: 154
                 Relay_Log_File: mysqld-relay-bin.000003
                  Relay_Log_Pos: 253
          Relay_Master_Log_File: mysql-bin.000004
               Slave_IO_Running: Yes
              Slave_SQL_Running: Yes
                Replicate_Do_DB: your_database_name
            Replicate_Ignore_DB:
             Replicate_Do_Table:
         Replicate_Ignore_Table:
        Replicate_Wild_Do_Table:
    Replicate_Wild_Ignore_Table:
                     Last_Errno: 0
                     Last_Error:
                   Skip_Counter: 0
            Exec_Master_Log_Pos: 9647
                Relay_Log_Space: 1067
                Until_
